<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ArcMap 台灣常見座標轉換流程</title>
      <link href="/How-to/ArcMap/cjyjv46t20000ew5g1h6hbm3k/"/>
      <url>/How-to/ArcMap/cjyjv46t20000ew5g1h6hbm3k/</url>
      
        <content type="html"><![CDATA[<p>在ArcToolbox中有個 「<strong>Create Custom Geographic Transformation</strong>」 工具，可以提供使用者自訂座標系統轉換參數。台灣的使用者可以透過該工具自訂TWD67、TWD97、WGS84三種常見座標系統的轉換參數，設定好的轉換參數檔案(*.gtf)預設放在以下目錄，使用者可以自行複製到其他電腦使用。</p><a id="more"></a><p><strong>C:\Users\&lt;user&gt;\AppData\Roaming\ESRI\Desktop&lt;版本&gt;\ArcToolbox \CustomTransformations</strong></p><p>設定完畢之後，定義為TWD67、TWD97、WGS84座標系統的地理資料，就可以使用 「<strong>Project</strong>」 工具，套用設定好的轉換參數進行座標系統轉換。因此使用ArcMap進行座標轉換流程可分為以下兩大步驟：</p><p>1.使用 「Create Custom Geographic Transformation」 建立轉換公式</p><p>2.使用 「Project」 對地理資料進行座標系統轉換</p><p>以下將針對上述兩步驟進行詳述。</p><h2 id="建立轉換公式"><a href="#建立轉換公式" class="headerlink" title="建立轉換公式"></a>建立轉換公式</h2><h3 id="建立TWD67-–-TWD97-座標轉換參數"><a href="#建立TWD67-–-TWD97-座標轉換參數" class="headerlink" title="建立TWD67 – TWD97 座標轉換參數"></a>建立TWD67 – TWD97 座標轉換參數</h3><ol><li><p>在ArcToolbox中開啟 「Create Custom Geographic Transformation」 工具，工具位於<strong>Data Management Tools</strong> &gt; <strong>Projections and Transformations</strong>底下</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image2.png" alt></p></li><li><p>依照以下資料輸入對應的參數值，並點選 「OK」 即可建立完成</p><table><thead><tr><th>參數名稱</th><th>參數值</th></tr></thead><tbody><tr><td>Geographic Transformation Name</td><td>TWD67 – TWD97</td></tr><tr><td>Input Geographic Coordinate System</td><td>TWD_1967_TM_Taiwan</td></tr><tr><td>Output Geographic Coordinate System</td><td>TWD_1997_TM_Taiwan</td></tr><tr><td>Method</td><td>Coordinate Frame</td></tr></tbody></table><p>【轉換參數】</p><table><thead><tr><th>X Axis Translation (meters)</th><th>X軸平移量(公尺)</th><th>730.160</th></tr></thead><tbody><tr><td>Y Axis Translation (meters)</td><td>Y軸平移量(公尺)</td><td>346.212</td></tr><tr><td>Z Axis Translation (meters)</td><td>Z軸平移量(公尺)</td><td>472.186</td></tr><tr><td>X Axis Rotation (seconds)</td><td>X軸旋轉量(秒)</td><td>7.968009465325332199694565793688</td></tr><tr><td>Y Axis Rotation (seconds)</td><td>Y軸旋轉量(秒)</td><td>3.5498173155125282722429064796627</td></tr><tr><td>Z Axis Rotation (seconds)</td><td>Z軸旋轉量(秒)</td><td>0.40634166830677981965825251394163</td></tr><tr><td>Scale Difference (ppm)</td><td>尺度參數</td><td>0.99998180</td></tr></tbody></table><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image3.png" alt></p></li></ol><h3 id="轉換方法與參數說明"><a href="#轉換方法與參數說明" class="headerlink" title="轉換方法與參數說明"></a>轉換方法與參數說明</h3><p>本文所提及的轉換方法是根據Help中的說明，Coordinate Frame法與台灣地區常用的Bursa-Wolf法在程式引擎當中是一樣的，所以在設定時選擇Coordinate Frame法。</p><p>  <img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image4.png" alt></p><p>轉換參數則是使用史天元老師等人於<strong>測量工程第41卷第3期</strong>所發表的 「TWD67與TWD97大地基準轉換方法研究」 一文中所提及的七參數Bursa-Wolf基準轉換參數，並將旋轉量單位徑換算為秒（因為Create Custom Geographic Transformation工具需要輸入秒）後所得的數值。在 「TWD67與TWD97大地基準轉換方法研究」 一文中，有提到<strong>經計算所得的七參數會有誤差，因此轉換結果也會有誤差</strong>。</p><h3 id="建立TWD97-–-WGS84-座標轉換參數"><a href="#建立TWD97-–-WGS84-座標轉換參數" class="headerlink" title="建立TWD97 – WGS84 座標轉換參數"></a>建立TWD97 – WGS84 座標轉換參數</h3><ol><li><p>在ArcToolbox中開啟 「Create Custom Geographic Transformation」 工具，工具位於<strong><em>Data Management Tools</em> &gt; <em>Projections and Transformations</em></strong>底下</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image2.png" alt></p></li><li><p>依照以下資料輸入對應的參數值，並點選 「OK」 即可建立完成</p><table><thead><tr><th>參數名稱</th><th>參數值</th></tr></thead><tbody><tr><td>Geographic Transformation Name</td><td>TWD97 – WGS84</td></tr><tr><td>Input Geographic Coordinate System</td><td>TWD_1997_TM_Taiwan</td></tr><tr><td>Output Geographic Coordinate System</td><td>GCS_WGS_1984</td></tr><tr><td>Method</td><td>GEOCENTRIC_TRANSLATION</td></tr></tbody></table><p>【轉換參數】</p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>X Axis Translation (meters)</td><td>0</td></tr><tr><td>Y Axis Translation (meters)</td><td>0</td></tr><tr><td>Z Axis Translation (meters)</td><td>0</td></tr></tbody></table></li></ol><h3 id="轉換方法與參數說明-1"><a href="#轉換方法與參數說明-1" class="headerlink" title="轉換方法與參數說明"></a>轉換方法與參數說明</h3><p>由EPSG 7.1版資料庫中查詢得知TWD97與WGS84的轉換方式名稱為 「TWD97 to WGS84」 ，編號是 「3830」 ，使用地區為 「台灣，中華民國，近陸與近海，台灣島、澎湖（澎湖群島）島」 ，轉換精度為 「1」 公尺。</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image5.png" alt></p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image6.png" alt></p><p>註記當中說明了 「近似值有正負一公尺的水準，假設TWD97近似於WGS84的話」 。資料來源為 「OGP（International Association of Oil &amp; Gas producers，國際油氣製造業協會）。</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image7.png" alt></p><p>座標轉換方法名稱 「地理中心轉移」 。轉換參數有三個， 「X軸轉移為0」 、 「Y軸轉移為0」 、 「Z軸轉移為0」 ，且該轉換是可進行逆向轉換的。</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image8.png" alt></p><p>由以上描述內容可得，TWD97經緯度基本上等同於WGS84經緯度，因為X軸、Y軸、Z軸的平移皆為0</p><h2 id="座標轉換"><a href="#座標轉換" class="headerlink" title="座標轉換"></a>座標轉換</h2><ol><li><p>在ArcToolbox中開啟 「Project」 工具，工具位於 <strong><em>Data Management Tools \ Projections and Transformations</em></strong> 底下</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image9.png" alt></p></li><li><p>只要 「Input Coordinate System」 與 「Output Coordinate System」 互為<code>TWD67</code>、<code>TWD97</code>、<code>WGS84</code>，就可以在 「Geographic Transformation」 的下拉選單中，選擇建立好的轉換公式。</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image10.png" alt></p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image11.png" alt></p></li><li><p>按下 「OK」 完成座標轉換</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image12.png" alt></p></li></ol><h3 id="在ArcMap中加入不同座標系統的地理資料"><a href="#在ArcMap中加入不同座標系統的地理資料" class="headerlink" title="在ArcMap中加入不同座標系統的地理資料"></a>在ArcMap中加入不同座標系統的地理資料</h3><p>使用ArcMap時如果加入不同座標系統的地理資料，ArcMap一般會跳出警告訊息，如下圖。</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image13.png" alt></p><p>如果此時按下 「Transformation」 按鈕，也可以指定要使用的轉換參數</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image14.png" alt></p><h2 id="TWD97與TWD67轉換結果比較"><a href="#TWD97與TWD67轉換結果比較" class="headerlink" title="TWD97與TWD67轉換結果比較"></a>TWD97與TWD67轉換結果比較</h2><p>當比例尺要放到很大，會發現TWD97與TWD67地理資料會有誤差。利用 「Measure」 工具量測，視地區不同，誤差約一公尺左右。</p><p><img src="/media/how-to/ArcMap/%E5%8F%B0%E7%81%A3%E5%B8%B8%E8%A6%8B%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E6%B5%81%E7%A8%8B/image15.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
          <category> ArcMap </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 座標轉換 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用免安裝版的PostgresSQL建立空間資料庫</title>
      <link href="/How-to/PostgreSQL/cjyjvvof30000ys5gc2pbndo1/"/>
      <url>/How-to/PostgreSQL/cjyjvvof30000ys5gc2pbndo1/</url>
      
        <content type="html"><![CDATA[<p>本文將介紹如何使用<code>PostgreSQL</code>，在本機電腦上建置一個可以隨時帶著走的地理資料庫，方便程式開發階段或是教學階段時使用。</p><a id="more"></a><h2 id="檢查ArcGIS支援哪一個版本的PostgreSQL"><a href="#檢查ArcGIS支援哪一個版本的PostgreSQL" class="headerlink" title="檢查ArcGIS支援哪一個版本的PostgreSQL"></a>檢查ArcGIS支援哪一個版本的PostgreSQL</h2><ol><li><p>先到<a href="http://desktop.arcgis.com/en/system-requirements/latest/database-requirements-postgresql.htm" target="_blank" rel="noopener">Help頁面</a>選擇你要使用的ArcGIS版本</p><p><img src="http://i.imgur.com/uQFnqql.png" alt="選擇你要使用的ArcGIS版本"></p></li><li><p>查詢有支援的最小版本</p><p><img src="https://i.imgur.com/iaqPryV.png" alt="查詢支援度"></p></li></ol><hr><h2 id="下載PostgresSQL"><a href="#下載PostgresSQL" class="headerlink" title="下載PostgresSQL"></a>下載PostgresSQL</h2><ol><li><p><a href="https://www.postgresql.org/download/windows/" target="_blank" rel="noopener">連到PostgreSQL官方網站</a></p></li><li><p>點選<a href="https://www.enterprisedb.com/download-postgresql-binaries" target="_blank" rel="noopener">zip archive</a></p></li><li><p>選擇適合的版本下載  </p></li></ol><h2 id="讓PostgreSQL具有儲存空間資料的能力"><a href="#讓PostgreSQL具有儲存空間資料的能力" class="headerlink" title="讓PostgreSQL具有儲存空間資料的能力"></a>讓PostgreSQL具有儲存空間資料的能力</h2><ol><li><p>在ArcMap預設安裝資料夾下，找到DatabaseSupport資料夾，預設安裝路徑為<code>C:\Program Files (x86)\ArcGIS\Desktop版本號碼\DatabaseSupport</code></p></li><li><p>找到PostgreSQL資料夾，然後依據你下載的版本，進入該版本的資要夾，然後再進入Windows64資料夾</p></li><li><p>複製資料夾中的<code>st_geometry.dll</code>以及<code>libst_raster_pg.dll</code>，到 <strong>PostgresSQL資料夾/lib</strong> 中</p></li></ol><h2 id="初始化你的PostgreSQL"><a href="#初始化你的PostgreSQL" class="headerlink" title="初始化你的PostgreSQL"></a>初始化你的PostgreSQL</h2><p>將以下程式碼複製到文字檔中，然後副檔案改成.bat儲存。然後執行這個批次檔。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">ECHO</span> ON</span><br><span class="line"><span class="comment">REM The script sets environment variables helpful for PostgreSQL</span></span><br><span class="line">@<span class="built_in">SET</span> <span class="built_in">PATH</span>="<span class="variable">%~dp0\bin";%</span><span class="built_in">PATH</span>%</span><br><span class="line">@<span class="built_in">SET</span> PGDATA=%~dp0\data</span><br><span class="line">@<span class="built_in">SET</span> PGDATABASE=postgres</span><br><span class="line">@<span class="built_in">SET</span> PGUSER=postgres</span><br><span class="line">@<span class="built_in">SET</span> PGPORT=<span class="number">5432</span></span><br><span class="line">@<span class="built_in">SET</span> PGLOCALEDIR=%~dp0\share\locale</span><br><span class="line"></span><br><span class="line"><span class="comment">REM remark at first run</span></span><br><span class="line"><span class="comment">rem "%~dp0\bin\initdb" -U postgres -A trust</span></span><br><span class="line"></span><br><span class="line">"%~dp0\bin\pg_ctl" -D "%~dp0/data" -l logfile <span class="built_in">start</span></span><br><span class="line"><span class="built_in">ECHO</span> "Click enter to stop"</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line">"%~dp0\bin\pg_ctl" -D "%~dp0/data" stop</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
          <category> PostgreSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 地理資料庫 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
